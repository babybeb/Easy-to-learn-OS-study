-----

Chapter10. 입출력 시스템과 저장장치

-----

### 01. 입출력 시스템
컴퓨터는 필수장치인 CPU와 메모리, 주변장치인 입출력장치와 저장장치로 구성되며,  
각 장치는 메인보드에 있는 버스로 연결됨  

버스를 1개만 사용하면 병목 현상이 발생하기 때문에  
여러 개의 버스를 묶어서 사용하는데 이때 데이터가 지나다니는 하나의 통로를 채널이라고 함  

주변장치의 데이터 전송 속도가 다르기 때문에 속도가 비슷한 장치끼리 묶어  
여러개의 채널을 효율적으로 사용함  

모든 장치가 하나의 버스로 연결되고, CPU가 작업을 진행하다가 입출력 명령을 만나  
직접 입출력장치에서 데이터를 가져오는 것을 **폴링(polling)** 방식이라고 하는데  
컴퓨터의 기술이 발전하며 **입출력 제어기**에 모든 입출력을 맡기는 구조로 변경됨

결론적으로 현대의 컴퓨터는 CPU와 메모리를 연결하는 메인버스,  
CPU와 그래픽카드를 연결하는 그래픽 버스,  
고속 입출력 버스, 저속 입출력 버스를 사용함  

하나의 버스 채널은 주소 버스, 데이터 버스, 제어 버스로 구성됨  

#### 직접 메모리 접근(DMA)  
특정 하드웨어 하위 시스템이 CPU의 도움 없이 독립적으로  
메인 시스템 메모리에 접근할 수 있게 해주는 컴퓨터 시스템의 기능   

#### 인터럽트  
주변장치의 입출력 요구나 하드웨어의 이상 현상을 CPU에 알려주는 역할을 하는 신호  
CPU가 요청한 작업을 완료했을 때, 키보드로 데이터를 입력받았을 때,  
네트워크 카드에 새로운 데이터가 도착했을 때, 하드웨어에 이상이 발생했을 때 등  
다양한 경우에 인터럽트가 발생함  

* 외부 인터럽트 :  
  입출력장치로부터 오는 인터럽트와 전원 이상이거나 기계적인 오류 때문에 발생하는 인터럽트  
* 내부 인터럽트 :  
  프로세스의 잘못이나 예상치 못한 문제 때문에 발생하는 인터럽트  
* 시그널 :  
  사용자가 직접 발생시키는 인터럽트
  ex) 사용자가 Ctrl + c를 누르거나 kill 명령어를 사용하는 경우  

여러 인터럽트 중 어떤 인터럽트가 발생했는지 파악하기 위해
**인터럽트 벡터**라는 자료구조를 사용함  

인터럽트를 처리하는 방식은 다양한데  
인터럽트의 처리 방법을 함수 형태로 만들어 놓은 것을 **인터럽트 핸들러**라고 함

#### 인터럽트 요청 시 처리과정  
1) 인터럽트 요청 
2) 프로그램 실행 중단
3) 현재의 프로그램 상태 보존
4) 인터럽트 처리루틴 실행
5) 인터럽트 서비스 루틴 실행
6) 상태 복구
7) 중단된 프로그램 실행 재개

#### 버퍼
속도가 다른 두 장치의 속도 차이를 완화하는 역할  
데이터를 버퍼에 모아 한꺼번에 이동시키기 때문에 효율적  

운영체제는 버퍼가 꽉 찼을 때 입출력장치로 데이터를 전송하도록 설계되어 있는데  
이때문에 우리가 USB를 사용하는 경우 파일을 복사하도록 명령을 내린 뒤  
입출력은 완료됐지만 버퍼가 다 차지 않은 상태에서 USB 장치를 제거하면  
버퍼 안의 데이터가 저장되지 않는 문제가 발생할 수 있음  
때문에 윈도우에서는 외부 저장장치를 제거할 대 '하드웨어 안전 제거' 라는 것을 사용하도록 권고함  

버퍼가 다 차지 않아도 강제로 버퍼의 내용을 전송하도록 하는것을 **플러시**라고 함  


### 02. 디스크 장치  
#### 디스크 장치의 종류  
* 하드디스크(HDD) :  
  비 휘발성 데이터 저장소로 주기억장치를 보조하는 역할을 하는 보조기억장치  
* CD :  
  적외선 레이저를 이용하여 데이터를 저장하고 읽는 광학 저장매체  
* 
#### 디스크 장치의 데이터 전송 시간  
데이터 전송 시간 = 탐색 시간 + 회전 지연 시간 + 전송 시간  

#### 디스크 장치 관리  
* 파티션 :  
  디스크를 논리적으로 분할하는 작업  
* 포매팅 :  
  디스크를 초기화 하는 작업  
* 조각 모듬 :  
  파티션을 나누고 포매팅을 한 후 하드디스크가 느려지는 경우를 대비하기 위해  
  주기적으로 해주어야 하는 작업
  
#### 네트워크 장치
어떻게 구성하느냐에 따라 구분됨  
* DAS :  
  서버와 같은 컴퓨터에 직접 연결된 저장장치  
* NAS :  
  기존의 저장장치를 LAN이나 WAN에 붙여서 사용하는 방식  
  전용 운영체제를 가진 독립적인 장치로 새로운 하드디스크를 추가하거나 뺄 수 있음
* SAN :  
  NAS보다 진보된 형태의 네트워크 저장장치  
  데이터 서버, 백업 서버, RAID 등의 장치를 네트워크로 묶고  
  데이터 접근을 위한 서버를 두는 형태  
  시스템이 제공하는 인터페이스를 통해 데이터에 접근할 수 있음

### 03. 디스크 스케줄링
* FCFS 디스크 스케줄링 :  
  가장 단순한 디스크 스케줄링 방식으로, 요청이 들어온 트랙 순서대로 서비스함  
* SSTF 디스크 스케줄링 :  
  현재 헤드가 있는 위치에서 가장 가까운 트랙부터 서비스함  
* 블록 SSTF 디스크 스케줄링 :  
  SSTF 디스크 스케줄링의 공평성 위배를 어느 정도 해결한 방법으로  
  큐에 있는 트랙 요청을 일정한 블록 형태로 묶음  
* SCAN 디스크 스케줄링 :  
  SSTF 디스크 스케줄링의 공평성 위배 문제를 완화하기 위해 만들어진 기법  
  헤드가 한 방향으로만 움직이면서 서비스함  
* C-SCAN 디스크 스케줄링 :  
  디스크 스케줄링을 변형한 것으로 헤드가 한쪽 방향으로 움직일 때는 요청받은 트랙을 서비스하고  
  반대 방향으로 돌아올 때는 서비스하지 않고 이동만 함  
* LOOK 디스크 스케줄링 :  
  SCAN 디스크 스케줄링의 불필요한 부분을 제거하여 효율을 높인 기법  
* C-LOOK 디스크 스케줄링 :  
  C-SCAN 디스크 스케줄링의 LOOK 버전  
* SLTF 디스크 스케줄링 :  
  헤드가 고정된 저장장치에 적용됨  
  작업 요청이 들어온 섹터의 순서를 디스크가 회전하는 방향에 맞추어 다시 정렬함  

### 04. RAID
자동으로 백업을 하고 장애가 발생하면 이를 복구하는 시스템으로  
동일한 규격의 디스크를 여러 개 모아 구성하며,  
장애가 발생했을 때 데이터를 복구하는 데 사용함  

### 05. [심화학습] 하드웨어의 규격과 발전  
#### CPU와 GPU
GPU는 그래픽 처리 장치로  
계산, 메모리 관리, 주변장치 관리, 인터럽트 처리 등의 다양한 일을 하는 CPU와 달리  
그래픽 계산만 하도록 설계되어 있기 때문에  
계산 능력만 놓고 보았을 때는 GPU의 성능이 훨씬 뛰어남

<br>

#### 참고
[CD](https://namu.wiki/w/CD)  
[하드디스크란?](http://ingen.co.kr/xe/board_blog/2784)  
[인터럽트 처리과정 및 정의, 종류 알아보기](https://mindstation.tistory.com/164)  
[인터럽트의 개념과 종류](https://raisonde.tistory.com/entry/%EC%9D%B8%ED%84%B0%EB%9F%BD%ED%8A%B8Interrupt%EC%9D%98-%EA%B0%9C%EB%85%90%EA%B3%BC-%EC%A2%85%EB%A5%98)  
[DMA(직접 메모리 접근 구조)](https://dongkyung.tistory.com/entry/DMA%EC%A7%81%EC%A0%91-%EB%A9%94%EB%AA%A8%EB%A6%AC-%EC%A0%91%EA%B7%BC-%EA%B5%AC%EC%A1%B0)